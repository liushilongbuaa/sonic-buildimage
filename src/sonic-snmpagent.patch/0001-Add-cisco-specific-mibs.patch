From 04e2ff9027e7f41498e9630e285ff4dbc727f549 Mon Sep 17 00:00:00 2001
From: Qi Luo <qiluo-msft@users.noreply.github.com>
Date: Wed, 15 Mar 2017 21:42:10 +0000
Subject: [PATCH 1/2] Add cisco specific mibs

---
 src/sonic_ax_impl/main.py                       |  1 +
 src/sonic_ax_impl/mibs/vendor/cisco/__init__.py |  1 +
 src/sonic_ax_impl/mibs/vendor/cisco/mgmt.py     | 40 +++++++++++++++++++++++++
 3 files changed, 42 insertions(+)
 create mode 100644 src/sonic_ax_impl/mibs/vendor/cisco/mgmt.py

diff --git a/src/sonic_ax_impl/main.py b/src/sonic_ax_impl/main.py
index 682feca..7d176ce 100644
--- a/src/sonic_ax_impl/main.py
+++ b/src/sonic_ax_impl/main.py
@@ -31,6 +31,7 @@ class SonicMIB(
     ieee802_1ab.LLDPLocPortTable,
     ieee802_1ab.LLDPRemTable,
     dell.force10.SSeriesMIB,
+    cisco.mgmt.CiscoSystemExtMIB,
     cisco.ciscoPfcExtMIB.cpfcIfTable,
     cisco.ciscoPfcExtMIB.cpfcIfPriorityTable,
     cisco.ciscoSwitchQosMIB.csqIfQosGroupStatsTable,
diff --git a/src/sonic_ax_impl/mibs/vendor/cisco/__init__.py b/src/sonic_ax_impl/mibs/vendor/cisco/__init__.py
index 4c63170..822ac73 100644
--- a/src/sonic_ax_impl/mibs/vendor/cisco/__init__.py
+++ b/src/sonic_ax_impl/mibs/vendor/cisco/__init__.py
@@ -1,3 +1,4 @@
+from . import mgmt
 from . import ciscoPfcExtMIB
 from . import ciscoSwitchQosMIB
 from . import ciscoEntityFruControlMIB
diff --git a/src/sonic_ax_impl/mibs/vendor/cisco/mgmt.py b/src/sonic_ax_impl/mibs/vendor/cisco/mgmt.py
new file mode 100644
index 0000000..10c0a3d
--- /dev/null
+++ b/src/sonic_ax_impl/mibs/vendor/cisco/mgmt.py
@@ -0,0 +1,40 @@
+from sonic_ax_impl.mibs.vendor import sys_util_h
+from ax_interface import MIBMeta, ValueType
+from ax_interface.mib import MIBEntry
+
+
+class CiscoSystemExtMIB(metaclass=MIBMeta, prefix='.1.3.6.1.4.1.9.9.305'):
+    """
+    {iso(1) identified-organization(3) dod(6) internet(1) private(4) enterprise(1) 9 ciscoMgmt(9)
+    CISCO-SYSTEM-EXT-MIB (305)}
+
+    OID_cseSysMemoryUtilization = "1.3.6.1.4.1.9.9.305.1.1.2.0";
+    OID_cseSysCPUUtilization = "1.3.6.1.4.1.9.9.305.1.1.1.0";
+    """
+    updater = sys_util_h
+
+    """
+    cseSysMemoryUtilization OBJECT-TYPE
+    SYNTAX          Gauge32 (0..100 )
+    UNITS           "%"
+    MAX-ACCESS      read-only
+    STATUS          current
+    DESCRIPTION
+        "The average utilization of memory on the active
+        supervisor."
+    ::= { ciscoSysInfoGroup 2 }
+    """
+    cseSysMemoryUtilization = MIBEntry('1.1.2.0', ValueType.GAUGE_32, sys_util_h.get_memutil)
+
+    """
+    cseSysCPUUtilization OBJECT-TYPE
+    SYNTAX          Gauge32 (0..100 )
+    UNITS           "%"
+    MAX-ACCESS      read-only
+    STATUS          current
+    DESCRIPTION
+        "The average utilization of CPU on the active
+        supervisor."
+    ::= { ciscoSysInfoGroup 1 }
+    """
+    cseSysCPUUtilization = MIBEntry('1.1.1.0', ValueType.GAUGE_32, sys_util_h.get_cpuutil_5sec)
-- 
2.11.0

